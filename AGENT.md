# AGENT.md - Настройки для AI помощника Amp (Sourcegraph)

## Правила работы

### Язык общения

- **ВСЕГДА отвечать на русском языке**
- Объяснять логику кода на русском
- Комментарии к коду писать на русском
- Названия переменных/функций оставлять на английском
- Сообщения об ошибках переводить и объяснять на русском
- Использовать примеры кода с русскими комментариями
- При рефакторинге объяснять причины изменений на русском

### Создание описания коммитов

- **ВСЕГДА анализировать staged файлы** перед созданием описания коммита
- Использовать `git status` для проверки staged файлов
- Если нет staged файлов - сообщить пользователю о необходимости добавить файлы через `git add`
- Анализировать изменения через `git diff --staged` для понимания что именно изменилось
- Создавать описание коммита на основе реальных изменений в staged файлах
- Commit сообщения генерировать **полностью на русском языке** в повелительном наклонении
- Действие указывать на русском (например: "добавить", "исправить", "обновить", НЕ "feat:", "fix:", "docs:")
- Максимум 50 символов для первой строки
- Заголовок с заглавной буквы, без точки в конце
- Затем пустая строка и развёрнутое описание в виде списка
- В теле коммита описывать ЧТО именно было изменено и ПОЧЕМУ, не описывать КАК
- Примеры: "Добавить кэширование погоды", "Исправить ошибку загрузки"

### Подтверждение изменений

- **ВСЕГДА показывать план изменений и спрашивать подтверждение перед edit_file/create_file**
- Описать что будет изменено/создано перед применением
- Дождаться явного подтверждения от пользователя

### Среда разработки

- Операционная система: **Windows 10**
- Использовать Windows-команды и пути с обратными слешами (\)
- При поиске файлов и текста использовать Windows-совместимые команды
- Учитывать особенности PowerShell/Command Prompt

## Команды проекта

### Разработка

```bash
# Запуск в режиме разработки
pnpm run dev

# Сборка проекта
pnpm run build

# Проверка типов
pnpm run typecheck

# Линтинг
pnpm run lint
pnpm run lint:fix

# Форматирование
pnpm run format
```

## Конвенции именования

- Переменные: camelCase
- Константы: UPPER_CASE
- interface: i_camelCase
- enum: e_camelCase
- Функции: camelCase
- Классы: PascalCase
- Компоненты: PascalCase

### Именование файлов

- **Обычные файлы: kebab-case** (например: `user-service.ts`, `weather-api.ts`)
  - Совместимость с ОС и URL
  - Лучшая читаемость
  - Стандарт веб-экосистемы
- **React компоненты: PascalCase** (например: `UserProfile.tsx`, `WeatherCard.tsx`)
  - Соответствует именам компонентов в коде
  - Стандарт React экосистемы

### Идентификаторы

- **В структурах данных (JSON/интерфейсы):**

  - Уникальный идентификатор: `id`
  - Ссылка на другую сущность: `id_сущность` (например: `id_country`, `id_city`)

- **В коде (переменные/параметры):**
  - Соответствующие переменные: `idСущность` в camelCase (например: `idCountry`, `idCity`)

Пример:

```typescript
// В интерфейсе
interface i_city {
  id: string;
  id_country: string;
}

// В функциях
function getCity(idCity: string, idCountry: string) { ... }
```

## Технологии

- React
- Vite
- TypeScript
- **Тестирование: Vitest** - использовать для всех тестов

### Настройки тестирования

При создании тестов использовать **Vitest**:

- Файлы тестов: `*.test.ts`, `*.spec.ts`
- Команда запуска: `pnpm test`
- Поддержка мокинга через `vi.mock()`, `vi.fn()`, `vi.spyOn()`

## Структура проекта

- `/src/` - исходный код приложения
- `/dist/` - собранные файлы
- `/resources/` - ресурсы приложения
